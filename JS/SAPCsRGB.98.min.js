/*
/////   SAPC - S-Luv Advanced Perceptual Contrast - Beta Algorithm 0.98
/////              *** WITH Low Contrast Extension ***
/////        *** Optimized for the Font Select Extension ***
/////
/////   Functions to parse color values and determine SAPC/APCA contrast
/////   Copyright Â© 2019-2020 by Andrew Somers. All Rights Reserved.
/////   LICENSE: GNU AGPL v3  https://www.gnu.org/licenses/
/////   CONTACT: For SAPC/APCA Please use the ISSUES tab at:
/////            https://github.com/Myndex/SAPC-APCA/
/////
*/
var sRGBtrc=2.218,sRGBtrcEncode=1/sRGBtrc,Rco=.2126,Gco=.7152,Bco=.0722,scaleBoW=1.618,scaleWoB=1.618,normBGExp=.38,normTXTExp=.43,revBGExp=.5,revTXTExp=.43,blkThrs=.02,blkClmp=1.33,loConThresh=.25,clipLevel=.03;function loConRamp(f,v,w,A,p,E){w=void 0===w?.4:w;var G=!1;0>f&&(G=!0,f=Math.abs(f));f=Math.max(0,f-Math.min(void 0===E?.095:E,Math.max(0,2-Math.abs(Math.cos(Math.pow(void 0===v?1:v,.25)*(void 0===A?2.8:A)))-(void 0===p?.6:p))*Math.max(0,Math.min(.1,(w-f)/(w-.1)*.1))));return G?-1*f:f}
function APCAcontrast(f,v,w){w=void 0===w?1:w;var A="";f=f.LYP;var p=v.LYP;if(f>=p){p=p>blkThrs?p:p+Math.pow(Math.abs(p-blkThrs),blkClmp);if(p>f)return"Error";v=(Math.pow(f,normBGExp)-Math.pow(p,normTXTExp))*scaleBoW;f=v>=loConThresh?v:loConRamp(v,f,loConThresh)}else{f=f>blkThrs?f:f+Math.pow(Math.abs(f-blkThrs),blkClmp);if(f>p)return"-Error";v=(Math.pow(f,revBGExp)-Math.pow(p,revTXTExp))*scaleWoB;A="-";f=v<=-loConThresh?v:loConRamp(v,p,loConThresh,2.6,.53,.11)}return f>clipLevel||f<-clipLevel?(100*
f).toFixed(w)+"":A+"LOW"}
function RGBcolor(f){function v(a,b,c){a=void 0===a?this.r:a;b=void 0===b?this.g:b;c=void 0===c?this.b:c;a=a.toString(16).padStart(2,"0");b=b.toString(16).padStart(2,"0");c=c.toString(16).padStart(2,"0");return"#"+a+b+c}function w(a){a/=255;return.04045<a?Math.pow((a+.055)/1.055,2.4):a/12.92}function A(a){return Math.max(Math.min(Math.round(255*(.0031308<a?1.055*Math.pow(a,.416666666666667)-.055:12.92*a)),255),0)}function p(a){return.008856451679035631<a?116*Math.pow(a,.3333333333333333)-16:903.2962962962963*
a}function E(a){return.008856451679035631<a?Math.pow(a,.3333333333333333):.008620689655172414*(903.2962962962963*a+16)}function G(a,b){var c=Math.pow(a*a+b*b,.5),d=.01>c?0:57.29577951308232*Math.atan2(b,a);return[c,0>d?d+360:d]}function M(a,b){a=.01<a?a:0;return[a*Math.cos(.017453292519943295*b),a*Math.sin(.017453292519943295*b)]}function I(a){return 8<a?Math.pow(.008620689655172414*(a+16),3):.0011070564598794539*a}function P(a,b,c){var d=.008620689655172414*(a+16);b=.002*b+d;c=d-.005*c;d=b*b*b;var e=
c*c*c;this.Y=I(a);this.X=(.008856451679035631<d?d:.0011070564598794539*(116*b-16))*y.X;this.Z=(.008856451679035631<e?e:.0011070564598794539*(116*c-16))*y.Z}function Q(a,b,c){this.Y=I(a);var d=-5*this.Y;b=.3333333333333333*(52*a/(b+13*a*y.Uref)-1);this.X=(this.Y*(39*a/(c+13*a*y.Vref)-5)-d)/(b- -.3333333333333333);this.Z=this.X*b+d}function R(a,b,c){0<b?(this.Y=Math.max(c,0),this.X=a*this.Y/b,this.Z=(1-a-b)*this.Y/b):(this.X=this.Z=0,this.Y=Math.max(c,0))}function S(){this.linR=3.2404542*this.X+-1.5371385*
this.Y+-.4985314*this.Z;this.linG=-.969266*this.X+1.8760108*this.Y+.041556*this.Z;this.linB=.0556434*this.X+-.2040259*this.Y+1.0572252*this.Z}function T(){this.sR=A(this.linR);this.sG=A(this.linG);this.sB=A(this.linB)}function N(a,b,c,d,e){e=void 0===e?"array":e;switch((void 0===a?0:a)&15){case 3:a=M(c,d),c=a[0],d=a[1];case 2:P(b,c,d);break;case 5:a=M(c,d),c=a[0],d=a[1];case 4:Q(b,c,d);break;case 1:this.Y=I(b);this.Z=this.X=0;break;case 8:R(c,d,b);break;case 9:this.Y=b;this.Z=this.X=0;break;case 15:this.X=
c;this.Y=b;this.Z=d;break;default:this.X=h.X,this.Y=h.Y,this.Z=h.Z}S();T();switch(e){case "array":return[this.sR,this.sG,this.sB];case "string":return v(this.sR,this.sG,this.sB);case "number":return this.sR<<16|this.sG<<8|this.sB;case "float":return[this.linR,this.linG,this.linB]}}f=(void 0===f?"777":f).replace(/[\s `~!@#$%^&*<>?{}:;"'+=-]/g,"");var J={Luv000degHuePatch:"ff006e",Luv005degHuePatch:"ff0056",Luv010degHuePatch:"ff002f",Luv015degHuePatch:"ff3800",Luv020degHuePatch:"ff5900",Luv025degHuePatch:"ff6f00",
Luv030degHuePatch:"ff8000",Luv035degHuePatch:"ff8e01",Luv040degHuePatch:"ff9b00",Luv045degHuePatch:"ffa600",Luv050degHuePatch:"ffb100",Luv055degHuePatch:"ffbb00",Luv060degHuePatch:"ffc600",Luv065degHuePatch:"ffcf00",Luv070degHuePatch:"ffda00",Luv075degHuePatch:"ffe500",Luv080degHuePatch:"fff000",Luv085degHuePatch:"fffd00",Luv090degHuePatch:"f3ff00",Luv095degHuePatch:"e5ff00",Luv100degHuePatch:"d5ff00",Luv105degHuePatch:"c4ff00",Luv110degHuePatch:"b1ff00",Luv115degHuePatch:"99ff00",Luv120degHuePatch:"7bff00",
Luv125degHuePatch:"4dff00",Luv130degHuePatch:"00ff46",Luv135degHuePatch:"00ff75",Luv140degHuePatch:"00ff90",Luv145degHuePatch:"00ffa4",Luv150degHuePatch:"00ffb3",Luv155degHuePatch:"00ffc0",Luv160degHuePatch:"00ffca",Luv165degHuePatch:"00ffd4",Luv170degHuePatch:"00ffdd",Luv175degHuePatch:"00ffe5",Luv180degHuePatch:"00ffed",Luv185degHuePatch:"00fff5",Luv190degHuePatch:"00fffc",Luv195degHuePatch:"00faff",Luv200degHuePatch:"00f3ff",Luv205degHuePatch:"00ecff",Luv210degHuePatch:"00e5ff",Luv215degHuePatch:"00ddff",
Luv220degHuePatch:"00d6ff",Luv225degHuePatch:"00ceff",Luv230degHuePatch:"00c5ff",Luv235degHuePatch:"01bcff",Luv240degHuePatch:"00b0ff",Luv245degHuePatch:"00a5ff",Luv250degHuePatch:"0095ff",Luv255degHuePatch:"0081ff",Luv260degHuePatch:"0065ff",Luv265degHuePatch:"0028ff",Luv270degHuePatch:"5900ff",Luv275degHuePatch:"8000ff",Luv280degHuePatch:"9c00ff",Luv285degHuePatch:"b200ff",Luv290degHuePatch:"c500ff",Luv295degHuePatch:"d700ff",Luv300degHuePatch:"e700ff",Luv305degHuePatch:"f700ff",Luv310degHuePatch:"ff00f8",
Luv315degHuePatch:"ff00ea",Luv320degHuePatch:"ff00dc",Luv325degHuePatch:"ff00d0",Luv330degHuePatch:"ff00c4",Luv335degHuePatch:"ff00b7",Luv340degHuePatch:"ff00ab",Luv345degHuePatch:"ff009e",Luv350degHuePatch:"ff0090",Luv355degHuePatch:"ff0080"};for(B in J)f==B&&(f=J[B]);this.cleaned=f=f.toLowerCase();var K={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",
brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkorange:"ff8c00",darksalmon:"e9967a",darkseagreen:"8fbc8f",deepskyblue:"00bfff",dodgerblue:"1e90ff",feldspar:"d19275",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorchid:"9932cc",darkred:"8b0000",darkslateblue:"483d8b",
darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",dimgray:"696969",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",
lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",
mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",
rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32",zzzcontrol1:"111111",zzzcontrol2:"222222",
zzzcontrol3:"333333",zzzcontrol4:"444444",zzzcontrol5:"555555",zzzcontrol6:"666666",zzzcontrol7:"777777",zzzcontrol8:"888888",zzzcontrol9:"999999",zzzcontrola:"aaaaaa",zzzcontrolb:"bbbbbb",zzzcontrolc:"cccccc",zzzcontrold:"dddddd",zzzcontrole:"eeeeee"};for(B in K)f==B&&(f=K[B]);var B=[{regex:/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{regex:/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d{1,3})\)$/,
example:["rgba(123,234,45,128)","rgba(255,234,245,233)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseInt(a[4])]}},{regex:/^([0-9|a-f]{2})$/,example:["fe","73"],process:function(a){return[parseInt(a[1],16),parseInt(a[1],16),parseInt(a[1],16)]}},{regex:/^([0-9|a-f]{1})([0-9|a-f]{1})([0-9|a-f]{1})$/,example:["fb0","b0b"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{regex:/^([0-9|a-f]{1})([0-9|a-f]{1})([0-9|a-f]{1})([0-9|a-f]{1})$/,
example:["fb0F","b0b8"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16),parseInt(a[4]+a[4],16)]}},{regex:/^([0-9|a-f]{2})([0-9|a-f]{2})([0-9|a-f]{2})$/,example:["05f3a0","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{regex:/^([0-9|a-f]{2})([0-9|a-f]{2})([0-9|a-f]{2})([0-9|a-f]{2})$/,example:["05f3a0ff","336699aa"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),parseInt(a[4],
16)]}}];var U=B.length;this.ok=!1;for(var H=0;H<U&&0==this.ok;H++){var C=B[H].regex;if(C=C.exec(f))C=B[H].process(C),this.r=C[0]&255,this.g=C[1]&255,this.b=C[2]&255,isNaN(C[3])?this.a="":this.a=C[3]&255,this.ok=!0}if(this.ok){this.hex=function(a,b,c,d){a=void 0===a?this.r:a;b=void 0===b?this.g:b;c=void 0===c?this.b:c;d=void 0===d?this.a:d;a=a.toString(16).padStart(2,"0");b=b.toString(16).padStart(2,"0");c=c.toString(16).padStart(2,"0");d=""===d?"":d.toString(16).padStart(2,"0");return a+b+c+d};this.hex2=
function(){var a=this.r.toString(16).padStart(2,"0"),b=this.g.toString(16).padStart(2,"0"),c=this.b.toString(16).padStart(2,"0"),d=""===this.a?"":this.a.toString(16).padStart(2,"0");return 0==this.r%17&&0==this.g%17&&0==this.b%17&&0==this.a%17?a.charAt(0)+b.charAt(0)+c.charAt(0)+d.charAt(0):a+b+c+d};this.hexNoA=function(a,b,c){a=void 0===a?this.r:a;b=void 0===b?this.g:b;c=void 0===c?this.b:c;a=a.toString(16).padStart(2,"0");b=b.toString(16).padStart(2,"0");c=c.toString(16).padStart(2,"0");return"#"+
a+b+c};this.hexNoA2=function(){var a=this.r.toString(16).padStart(2,"0"),b=this.g.toString(16).padStart(2,"0"),c=this.b.toString(16).padStart(2,"0");return 0==this.r%17&&0==this.g%17&&0==this.b%17?"#"+a.charAt(0)+b.charAt(0)+c.charAt(0):"#"+a+b+c};this.RGBAstr=function(){return""==this.a?"rgb("+this.r+","+this.g+","+this.b+")":"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"};this.RGBstr=function(){return"rgb( "+this.r+", "+this.g+", "+this.b+" )"};this.RGBAhex=function(){return""==this.a?this.r<<
24|this.g<<16|this.b<<8|255:this.r<<24|this.g<<16|this.b<<8|this.a};this.RGBhex=function(){return this.r<<16|this.g<<8|this.b};this.decRGBstr=function(a){a=void 0===a?3:a;return"rgb("+(this.r/255).toFixed(a)+","+(this.g/255).toFixed(a)+","+(this.b/255).toFixed(a)+")"};this.decRGBAstr=function(a){a=void 0===a?4:a;return""===this.a?"rgb("+(this.r/255).toPrecision(a).substr(0,a+4)+","+(this.g/255).toPrecision(a).substr(0,a+4)+","+(this.b/255).toPrecision(a).substr(0,a+4)+")":"rgba("+(this.r/255).toPrecision(a).substr(0,
a+4)+","+(this.g/255).toPrecision(a).substr(0,a+4)+","+(this.b/255).toPrecision(a).substr(0,a+4)+","+(this.a/255).toPrecision(a).substr(0,a+4)+")"};this.decRGBarray=function(){return[this.r/255,this.g/255,this.b/255]};this.decRGBAarray=function(){return""===this.a?[this.r/255,this.g/255,this.b/255,1]:[this.r/255,this.g/255,this.b/255,this.a/255]};var O=!1;O=!0;this.RlinP=Math.pow(this.r/255,sRGBtrc);this.GlinP=Math.pow(this.g/255,sRGBtrc);this.BlinP=Math.pow(this.b/255,sRGBtrc);this.RlinCoP=Rco*this.RlinP;
this.GlinCoP=Gco*this.GlinP;this.BlinCoP=Bco*this.BlinP;this.LYP=this.RlinCoP+this.GlinCoP+this.BlinCoP;this.LY100P=100*this.LYP;this.Rlin=function(a){a=void 0===a?sRGBtrc:a;return Math.pow(this.r/255,a)};this.Glin=function(a){a=void 0===a?sRGBtrc:a;return Math.pow(this.g/255,a)};this.Blin=function(a){a=void 0===a?sRGBtrc:a;return Math.pow(this.b/255,a)};this.RlinCo=function(a,b){a=void 0===a?sRGBtrc:a;b=void 0===b?Rco:b;return b*this.Rlin(a)};this.GlinCo=function(a,b){a=void 0===a?sRGBtrc:a;b=void 0===
b?Gco:b;return b*this.Glin(a)};this.BlinCo=function(a,b){a=void 0===a?sRGBtrc:a;b=void 0===b?Bco:b;return b*this.Blin(a)};this.LY=function(a,b,c,d){a=void 0===a?sRGBtrc:a;b=void 0===b?Rco:b;c=void 0===c?Gco:c;d=void 0===d?Bco:d;return this.RlinCo(a,b)+this.GlinCo(a,c)+this.BlinCo(a,d)};this.LY100=function(a){a=void 0===a?sRGBtrc:a;return 100*this.LY(a)};this.LY100str=function(a){a=void 0===a?4:a;return this.LY100().toPrecision(a).substr(0,a+4)};this.Ls=function(a){a=void 0===a?normTXTExp:a;return 100*
Math.pow(this.LY(),a)};this.Lstar=function(a,b){a=void 0===a?this.LYP:a;return p(a/(void 0===b?1:b))};this.LstarStr=function(a,b,c){a=void 0===a?4:a;b=void 0===b?this.LYP:b;return p(b/(void 0===c?1:c)).toPrecision(a).substr(0,a+4)};this.sRlin=function(a){a=void 0===a?this.r:a;return w(a)};this.sGlin=function(a){a=void 0===a?this.g:a;return w(a)};this.sBlin=function(a){a=void 0===a?this.b:a;return w(a)};this.sRlinCo=function(a){a=void 0===a?Rco:a;return a*this.sRlin()};this.sGlinCo=function(a){a=void 0===
a?Gco:a;return a*this.sGlin()};this.sBlinCo=function(a){a=void 0===a?Bco:a;return a*this.sBlin()};this.sLY=function(){return this.sRlinCo()+this.sGlinCo()+this.sBlinCo()};this.sLY100=function(){return 100*this.sLY()};this.sLstar=function(a,b){a=void 0===a?this.sLY():a;return p(a/(void 0===b?1:b))};var y={X:.95047,Y:1,Z:1.08883,XYZumRef:3.0393,Xdiv:1.0521110608435826,Ydiv:1,Zdiv:.9184170164304805,xRef:.3127266146810121,yRef:.3290231303260619,UV:19.21696,Uref:.19783982482140774,Vref:.4683363029324097},
h={Y100:0,Lstar:0,La:0,Lb:0,Lu:0,Lv:0,X:0,Z:0,x:0,y:0,Y:0,Labuv:0,Cab:0,hab:0,Cuv:0,huv:0};this.CIE=function(a,b,c,d,e){a=void 0===a?15:a;switch(void 0===b?"piecewise":b){case 0:case "piecewise":Rlin=this.sRlin();Glin=this.sGlin();Blin=this.sBlin();break;case 1:case "simpleExp":O?(Rlin=this.RlinP,Glin=this.GlinP,Blin=this.BlinP):(Rlin=this.Rlin(),Glin=this.Glin(),Blin=this.Blin());break;case 2:case "int":Rlin=this.sRlin(isNaN(c)?170:c&255);Glin=this.sGlin(isNaN(d)?170:d&255);Blin=this.sBlin(isNaN(e)?
170:e&255);break;case 3:case "intExp":Rlin=this.Rlin(isNaN(c)?128:c&255);Glin=this.Glin(isNaN(d)?128:d&255);Blin=this.Blin(isNaN(e)?128:e&255);break;case 4:case "float":Rlin=isNaN(c)?.184:c;Glin=isNaN(d)?.184:d;Blin=isNaN(e)?.184:e;break;default:Rlin=.496933,Glin=.401978,Blin=.72306}a&=15;b=.4124564*Rlin+.3575761*Glin+.1804375*Blin;c=.2126729*Rlin+.7151522*Glin+.072175*Blin;d=.0193339*Rlin+.119192*Glin+.9503041*Blin;h.X=b;h.Y=c;h.Z=d;h.Y100=100*c;8==(a&8)&&(e=b+c+d,h.x=0<e?b/e:y.xRef,h.y=0<e?c/e:
y.yRef);if(0!=(a&7)){var g=E(c);h.Lstar=h.Labuv=116*g-16}if(2==(a&2)){var r=d*y.Zdiv;e=E(b*y.Xdiv);r=E(r);h.La=500*(e-g);h.Lb=200*(g-r)}4==(a&4)&&(g=b+15*c+3*d,h.Lu=13*h.Labuv*((0<g?4*b/g:0)-y.Uref),h.Lv=13*h.Labuv*((0<g?9*c/g:0)-y.Vref));3==(a&3)&&(g=G(h.La,h.Lb),h.Cab=g[0],h.hab=g[1]);5==(a&5)&&(g=G(h.Lu,h.Lv),h.Cuv=g[0],h.huv=g[1]);return h};this.getLuvListXML=function(a){a=void 0===a?"none":a;var b=[];for(c in J)b[b.length]=c;"name"==a?b.sort(function(D,x){var k=parseInt(D.substr(5,3)),l=parseInt(x.substr(5,
3));return k<l?-1:k>l?1:0}):"luminance"==a?b.sort(function(D,x){var k=new RGBcolor(D),l=new RGBcolor(x);return k.LYP<l.LYP?-1:k.LYP>l.LYP?1:0}):"perception"==a&&b.sort(function(D,x){var k=(new RGBcolor(D)).CIE(),l=(new RGBcolor(x)).CIE(),F=k.hab>k.huv?k.hab-k.huv:k.hab+360-k.huv,m=l.hab>l.huv?l.hab-l.huv:l.hab+360-l.huv;k=.05<k.Cuv?1.5*k.Lstar+.046875*k.Cuv+.125*F:1.5*k.Lstar+.03*k.Lstar;l=.05<l.Cuv?1.5*l.Lstar+.046875*l.Cuv+.125*m:1.5*l.Lstar+.03*l.Lstar;return k<l?-1:k>l?1:0});a=document.createElement("ul");
a.setAttribute("id","RGBcolor-MaxLuv");var c=0;var d=b.length,e=document.createElement("li"),g=e.appendChild(document.createElement("div"));g.style.cssText="height: 48px;text-align: center; padding: 12px; font-size: 3em; font-weight: 700; background-color: #50C;color: #FFF;border-radius: 32px 12px 0 0";g.innerHTML="LUV List";g=e.appendChild(document.createElement("div"));g.style.cssText="height: 48px; padding: 4px;text-align: center; font-size: 1em; line-height: 1.3; background-color: #678;border: 4px solid #50C;border-radius: 0 0 12px 12px";
g.innerHTML="LUV LCh Listing Color SettingsMaximum sRGB values in 5\u00b0 CIE Luv hue Increments.";for(a.appendChild(e);c<d;c++)try{var r=document.createElement("li"),z=new RGBcolor(b[c]),q=z.CIE(),n=document.createElement("div"),u=.1>q.Cuv?0:q.Cuv,L=.1>q.Cuv?0:q.huv;n.style.cssText="background-color: #"+z.hex()+"; ";n.innerHTML=' &nbsp; <span style="background-color: #0005;">'+b[c]+" #"+z.hex()+" LUV L*: "+q.Lstar.toPrecision(4)+" Chroma: "+u.toPrecision(4)+" Hue: "+L.toPrecision(4)+"\u00b0 </span>";
r.appendChild(n);a.appendChild(r)}catch(D){}return a};this.getSlim2XML=function(){var a=[],b=[];new RGBcolor("22aa44");for(igen=0;72>igen;igen++){var c=5*igen;a[igen]=N(3,75,67,c+150,"string");b[igen]=N(5,75,100,c+142.2,"string")}c=document.createElement("ul");c.setAttribute("id","RGBcolor-slim2");var d=document.createElement("li"),e=d.appendChild(document.createElement("div"));e.style.cssText="height: 48px;text-align: center; padding: 12px; font-size: 3em; font-weight: 700; background-color: #50C;color: #FFF;border-radius: 32px 12px 0 0;";
e.innerHTML="LAB";e=d.appendChild(document.createElement("div"));e.style.cssText="height: 48px;text-align: center; padding: 12px; font-size: 3em; font-weight: 700; background-color: #50C;color: #FFF; border-radius: 12px 32px 0 0;";e.innerHTML="LUV";e=d.appendChild(document.createElement("div"));e.style.cssText="height: 48px; padding: 4px;text-align: center; font-size: 1em; line-height: 1.3; background-color: #678;border: 4px solid #50C;border-radius: 0 0 12px 12px;";e.innerHTML="LAB LCh Generated Colors Settings:<br>L*: 75 \u2022 C: 67 \u2022 Hue Start: 150\u00b0 Inc: 5\u00b0";
e=d.appendChild(document.createElement("div"));e.style.cssText="height: 48px; padding: 4px;text-align: center; font-size: 1em; line-height: 1.3; background-color: #678;border: 4px solid #50C;border-radius: 0 0 12px 12px;";e.innerHTML="LUV LCh Generated Color Settings:<br>L*: 75 \u2022 C: 100 \u2022 Hue Start: 142.2\u00b0 Inc: 5\u00b0";c.appendChild(d);d=0;for(e=a.length;d<e;d++){var g=document.createElement("li"),r=new RGBcolor(a[d]),z=r.CIE(),q=new RGBcolor(b[d]),
n=q.CIE(),u=document.createElement("div");u.style.cssText="background-color: #"+r.hex()+"; ";u.innerHTML=' &nbsp; <span style="">  ('+(d+1)+") LAB L*: "+z.Lstar.toPrecision(4)+" Chroma: "+z.Cab.toPrecision(4)+" Hue: "+z.hab.toPrecision(4)+"\u00b0 #"+r.hex()+"</span>";r=document.createElement("div");r.style.cssText="text-align: right; background-color: #"+q.hex()+" ;";r.innerHTML=' &nbsp; <span style="">  ('+(d+1)+") LUV L* "+n.Lstar.toPrecision(4)+" Chroma: "+n.Cuv.toPrecision(4)+" Hue: "+n.huv.toPrecision(4)+
"\u00b0 #"+q.hex()+"</span> &nbsp; ";g.appendChild(u);g.appendChild(r);c.appendChild(g)}return c};this.getHelpXML=function(a){a=void 0===a?"perception":a;var b=[];for(c in K)b[b.length]=c;"name"==a?b.sort(function(l,F){}):"luminance"==a?b.sort(function(l,F){var m=new RGBcolor(l),t=new RGBcolor(F);return m.LYP<t.LYP?-1:m.LYP>t.LYP?1:0}):"perception"==a&&b.sort(function(l,F){var m=(new RGBcolor(l)).CIE(),t=(new RGBcolor(F)).CIE(),V=m.hab>m.huv?m.hab-m.huv:m.hab+360-m.huv,W=t.hab>t.huv?t.hab-t.huv:t.hab+
360-t.huv;m=.05<m.Cuv?1.5*m.Lstar+.046875*m.Cuv+.125*V:1.5*m.Lstar+.03*m.Lstar;t=.05<t.Cuv?1.5*t.Lstar+.046875*t.Cuv+.125*W:1.5*t.Lstar+.03*t.Lstar;return m<t?-1:m>t?1:0});var c=document.createElement("ul");c.setAttribute("id","RGBcolor-examples");var d=0,e=b.length,g=document.createElement("li"),r=g.appendChild(document.createElement("div"));r.style.cssText="height: 48px; width: 100%;text-align: center; padding: 6px; font-size: 2em; font-weight: 700; background-color: #50C;color: #FFF;border-radius: 18px";
r.innerHTML="HTML Colors sorted by "+a;for(c.appendChild(g);d<e;d++)try{var z=document.createElement("li"),q=new RGBcolor(b[d]),n=q.CIE(),u=q.LY100P,L=n.hab<n.huv?n.hab+360-n.huv:n.hab-n.huv,D=100.2<(.05<n.Cuv?1.5*n.Lstar+.046875*n.Cuv+.125*L:1.5*n.Lstar+.03*n.Lstar)?"000":"FFF";18<u&&32>=u||32<u&&46.2>=u||q.hex();18<u&&32>=u||32<u&&46.2>=u||q.hex();var x=document.createElement("div");x.style.cssText="background-color: #"+q.hex()+"; color: #"+D+"; overflow: hidden; white-space: nowrap;";x.appendChild(document.createTextNode(d+
1+") "+b[d]));x.appendChild(document.createElement("br"));x.appendChild(document.createElement("br"));var k=x.appendChild(document.createElement("span"));k.appendChild(document.createTextNode(q.hexNoA()+" \u2022\u2022\u2022 "+q.RGBstr()));k.appendChild(document.createElement("br"));k.appendChild(document.createTextNode("Luminance: "+u.toPrecision(4)+" \u2022\u2022\u2022 L*: "+q.Lstar().toPrecision(4)));k.appendChild(document.createElement("br"));k.appendChild(document.createElement("br"));z.appendChild(x);
c.appendChild(z)}catch(l){}return c}}else this.r=this.g=this.b=this.a=0};